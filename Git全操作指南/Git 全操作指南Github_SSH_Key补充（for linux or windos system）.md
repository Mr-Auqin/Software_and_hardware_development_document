# Git å…¨æ“ä½œæŒ‡å—_Github_SSH_Key_è¡¥å……ï¼ˆfor linux or windos systemï¼‰

ä½œè€…ï¼šMr-Auqin è”ç³»æ–¹å¼ï¼š2480015679@qq.com



[TOC]



## æ–‡æ¡£è¯´æ˜

ä½œä¸ºGit å…¨æ“ä½œæŒ‡å—ï¼ˆVSCode è¿œç¨‹ Linux ç‰ˆï¼‰çš„Github_SSH_key è¡¥å……è¯´æ˜



### SSH å¯†é’¥é…ç½®ï¼ˆED25519 ç®—æ³•ï¼Œå…å¯†æ¨é€ / æ‹‰å–ä»£ç ï¼Œå¿…åšï¼ï¼‰

Git è¿æ¥è¿œç¨‹ä»“åº“ï¼ˆGitHub/Gitee/GitLabï¼‰æœ‰ä¸¤ç§æ–¹å¼ï¼šHTTPSï¼ˆæ¯æ¬¡éœ€è¾“å¯†ç ï¼‰å’Œ SSHï¼ˆå…å¯†ï¼‰ï¼Œ**æ¨èä½¿ç”¨ ED25519 ç®—æ³•ç”Ÿæˆ SSH å¯†é’¥**ï¼ˆæ¯” RSA æ›´å®‰å…¨ã€é«˜æ•ˆï¼Œå…¼å®¹æ‰€æœ‰ä¸»æµ Git å¹³å°ï¼‰ã€‚

> æ ¸å¿ƒè¯´æ˜ï¼šVSCode è¿œç¨‹è¿æ¥ Linux å¼€å‘æ—¶ï¼Œä¼˜å…ˆé…ç½® **Linux ç«¯ SSH å¯†é’¥**ï¼ˆæ“ä½œ Linux å†…ä»£ç æ—¶ä½¿ç”¨ï¼‰ï¼›å¦‚éœ€åœ¨ Windows æœ¬åœ°æ“ä½œä»£ç ï¼Œéœ€å•ç‹¬é…ç½® Windows ç«¯ SSH å¯†é’¥ã€‚

#### ï¼ˆä¸€ï¼‰Linux ç«¯ SSH å¯†é’¥é…ç½®ï¼ˆED25519ï¼Œæ ¸å¿ƒï¼Œé€‚é…è¿œç¨‹å¼€å‘ï¼‰

##### æ­¥éª¤ 1ï¼šæ£€æŸ¥æ˜¯å¦å·²æœ‰ SSH å¯†é’¥ï¼ˆé¿å…é‡å¤ç”Ÿæˆï¼‰

bash

è¿è¡Œ

```
# è¿›å…¥SSHç›®å½•ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰id_ed25519ï¼ˆç§é’¥ï¼‰ã€id_ed25519.pubï¼ˆå…¬é’¥ï¼‰æ–‡ä»¶
cd ~/.ssh
ls -l  # è‹¥æ˜¾ç¤ºid_ed25519å’Œid_ed25519.pubï¼Œè¯´æ˜å·²æœ‰ED25519å¯†é’¥ï¼Œå¯è·³è¿‡ç”Ÿæˆæ­¥éª¤
```

##### æ­¥éª¤ 2ï¼šç”Ÿæˆ ED25519 æ ¼å¼ SSH å¯†é’¥ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰

bash

è¿è¡Œ

```
# ç”ŸæˆED25519æ ¼å¼å¯†é’¥ï¼ˆç›®å‰æœ€å®‰å…¨çš„SSHå¯†é’¥ç®—æ³•ï¼‰ï¼Œ-Cç»‘å®šä½ çš„Gité‚®ç®±ï¼ˆä¸ç”¨æˆ·ä¿¡æ¯é…ç½®ä¸€è‡´ï¼‰
ssh-keygen -t ed25519 -C "ä½ çš„Gité‚®ç®±åœ°å€"
# æ‰§è¡Œåä¼šæç¤ºï¼š
# Enter file in which to save the key (/home/ä½ çš„ç”¨æˆ·å/.ssh/id_ed25519)ï¼šç›´æ¥å›è½¦ï¼ˆä½¿ç”¨é»˜è®¤è·¯å¾„ï¼‰
# Enter passphrase (empty for no passphrase)ï¼šå¯é€‰ï¼ˆè¾“å…¥å¯†ç åˆ™æ¯æ¬¡ç”¨SSHéœ€éªŒè¯ï¼Œç›´æ¥å›è½¦=å…å¯†ï¼‰
# Enter same passphrase againï¼šåŒä¸Šï¼Œç›´æ¥å›è½¦
```

âœ… ç”ŸæˆæˆåŠŸåï¼Œ`~/.ssh` ç›®å½•ä¼šæ–°å¢ä¸¤ä¸ªæ–‡ä»¶ï¼š

- `id_ed25519`ï¼šED25519 ç§é’¥ï¼ˆæ ¸å¿ƒï¼Œä¿å­˜åœ¨æœ¬åœ°ï¼Œç»å¯¹ä¸èƒ½æ³„éœ²ï¼ï¼‰
- `id_ed25519.pub`ï¼šED25519 å…¬é’¥ï¼ˆå¯å…¬å¼€ï¼Œéœ€æ·»åŠ åˆ°è¿œç¨‹ Git å¹³å°ï¼‰

> è¡¥å……ï¼šè‹¥ä½ çš„ Linux ç³»ç»Ÿç‰ˆæœ¬è¿‡æ—§ï¼ˆå¦‚ CentOS 6ï¼‰ä¸æ”¯æŒ ED25519ï¼Œå¯ fallback åˆ° RSA 4096 ä½ï¼š`ssh-keygen -t rsa -b 4096 -C "ä½ çš„Gité‚®ç®±åœ°å€"`

##### æ­¥éª¤ 3ï¼šæŸ¥çœ‹å¹¶å¤åˆ¶ SSH å…¬é’¥å†…å®¹

bash

è¿è¡Œ

```
# æŸ¥çœ‹ED25519å…¬é’¥å†…å®¹ï¼ˆå¤åˆ¶è¾“å‡ºçš„å…¨éƒ¨æ–‡æœ¬ï¼‰
cat ~/.ssh/id_ed25519.pub
# ç¤ºä¾‹è¾“å‡ºæ ¼å¼ï¼šssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl ä½ çš„Gité‚®ç®±åœ°å€
```

ğŸ‘‰ æ“ä½œï¼šé€‰ä¸­ç»ˆç«¯é‡Œå…¬é’¥çš„**å…¨éƒ¨å†…å®¹**ï¼ˆä»`ssh-ed25519`å¼€å§‹åˆ°é‚®ç®±ç»“æŸï¼‰ï¼Œå¤åˆ¶ï¼ˆLinux ç»ˆç«¯å¯å³é”®â†’å¤åˆ¶ï¼‰ã€‚

##### æ­¥éª¤ 4ï¼šå°†å…¬é’¥æ·»åŠ åˆ°è¿œç¨‹ Git å¹³å°ï¼ˆä»¥ GitHub ä¸ºä¾‹ï¼‰

1. ç™»å½• GitHub è´¦å· â†’ ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ ã€ŒSettingsã€

2. å·¦ä¾§èœå•é€‰æ‹©ã€ŒSSH and GPG keysã€â†’ ç‚¹å‡»ã€ŒNew SSH keyã€

3. å¡«å†™ä¿¡æ¯ï¼š

   - Titleï¼šè‡ªå®šä¹‰åç§°ï¼ˆå¦‚ã€ŒLinux è™šæ‹Ÿæœº - IMX6ULL å¼€å‘ - ED25519ã€ï¼‰
   - Key typeï¼šé»˜è®¤ã€ŒAuthentication keyã€
   - Keyï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„ ED25519 å…¬é’¥å†…å®¹ï¼ˆå®Œæ•´ç²˜è´´ï¼Œä¸è¦æ¼å­—ç¬¦ï¼‰

   

4. ç‚¹å‡»ã€ŒAdd SSH keyã€â†’ è¾“å…¥ GitHub å¯†ç éªŒè¯ï¼Œå®Œæˆæ·»åŠ ã€‚

âœ… Gitee/GitLab æ“ä½œå·®å¼‚ï¼š

- Giteeï¼šè®¾ç½® â†’ å®‰å…¨è®¾ç½® â†’ SSH å…¬é’¥ â†’ æ·»åŠ å…¬é’¥
- GitLabï¼šè®¾ç½® â†’ SSH Keys â†’ æ·»åŠ å…¬é’¥

##### æ­¥éª¤ 5ï¼šéªŒè¯ SSH è¿æ¥æ˜¯å¦æˆåŠŸ

bash

è¿è¡Œ

```
# éªŒè¯GitHubè¿æ¥ï¼ˆæ›¿æ¢ä¸ºå¯¹åº”å¹³å°åŸŸåï¼‰
ssh -T git@github.com
# éªŒè¯Giteeè¿æ¥ï¼šssh -T git@gitee.com
# éªŒè¯GitLabè¿æ¥ï¼šssh -T git@gitlab.com
```

âœ… æˆåŠŸæç¤ºï¼š`Hi ä½ çš„GitHubç”¨æˆ·å! You've successfully authenticated, but GitHub does not provide shell access.`

##### æ­¥éª¤ 6ï¼šé…ç½® SSH è¿æ¥æŒä¹…åŒ–ï¼ˆå¯é€‰ï¼Œé¿å…é¢‘ç¹é‡è¿ï¼‰

bash

è¿è¡Œ

```
# ç¼–è¾‘SSHé…ç½®æ–‡ä»¶
vim ~/.ssh/config
# ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼ˆé€‚é…GitHubï¼Œå…¶ä»–å¹³å°å¯æ–°å¢Hostï¼Œæ³¨æ„IdentityFileæ”¹ä¸ºED25519ç§é’¥è·¯å¾„ï¼‰
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519  # æ ¸å¿ƒï¼šæŒ‡å‘ED25519ç§é’¥
    ServerAliveInterval 30
    ServerAliveCountMax 10
# ä¿å­˜é€€å‡ºï¼ˆVimï¼šEsc â†’ :wqï¼‰
```

##### æ­¥éª¤ 7ï¼šLinux ç«¯ SSH å¸¸è§é—®é¢˜æ’æŸ¥

1. éªŒè¯è¿æ¥æ—¶æŠ¥é”™ã€ŒPermission denied (publickey)ã€ï¼š

   - æ£€æŸ¥å…¬é’¥æ˜¯å¦å®Œæ•´ç²˜è´´åˆ°å¹³å°ï¼Œæ— å¤šä½™ç©ºæ ¼ / æ¢è¡Œï¼›
   - æ£€æŸ¥ç§é’¥æƒé™ï¼ˆå¿…é¡»ä¸º 600ï¼‰ï¼š`chmod 600 ~/.ssh/id_ed25519`ï¼›
   - é‡å¯ SSH ä»£ç†ï¼š`eval "$(ssh-agent -s)" && ssh-add ~/.ssh/id_ed25519`ã€‚

2. å…¬é’¥æ·»åŠ åä»éœ€è¾“å¯†ç ï¼š

   - ç¡®è®¤è¿œç¨‹ä»“åº“åœ°å€æ˜¯ SSH æ ¼å¼ï¼ˆè€Œé HTTPSï¼‰ï¼š

     ```
     git remote -v
     ```

      æŸ¥çœ‹ï¼Œè‹¥ä¸º HTTPS å¯ä¿®æ”¹ï¼š

     bash

     è¿è¡Œ

     ```
     git remote set-url origin git@github.com:ä½ çš„ç”¨æˆ·å/ä»“åº“å.git
     ```

#### ï¼ˆäºŒï¼‰Windows ç«¯ SSH å¯†é’¥é…ç½®ï¼ˆED25519ï¼Œå¯é€‰ï¼Œæœ¬åœ°æ“ä½œä»£ç ç”¨ï¼‰

##### æ­¥éª¤ 1ï¼šæ‰“å¼€ Git Bash ç»ˆç«¯

å®‰è£… Git åï¼Œåœ¨ Windows æ¡Œé¢ / æ–‡ä»¶å¤¹ç©ºç™½å¤„å³é”® â†’ é€‰æ‹©ã€ŒGit Bash Hereã€ã€‚

##### æ­¥éª¤ 2ï¼šæ£€æŸ¥æ˜¯å¦å·²æœ‰ SSH å¯†é’¥

bash

è¿è¡Œ

```
# è¿›å…¥SSHç›®å½•ï¼ˆWindowsé»˜è®¤è·¯å¾„ï¼‰
cd ~/.ssh
# æˆ– cd C:\Users\ä½ çš„Windowsç”¨æˆ·å\.ssh
ls -l  # æŸ¥çœ‹æ˜¯å¦æœ‰id_ed25519å’Œid_ed25519.pubæ–‡ä»¶
```

##### æ­¥éª¤ 3ï¼šç”Ÿæˆ ED25519 æ ¼å¼ SSH å¯†é’¥ï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰

bash

è¿è¡Œ

```
# ç”ŸæˆED25519æ ¼å¼å¯†é’¥ï¼Œ-Cç»‘å®šä½ çš„Gité‚®ç®±
ssh-keygen -t ed25519 -C "ä½ çš„Gité‚®ç®±åœ°å€"
# æ‰§è¡Œåæç¤ºï¼š
# Enter file in which to save the key (/c/Users/ä½ çš„ç”¨æˆ·å/.ssh/id_ed25519)ï¼šç›´æ¥å›è½¦
# Enter passphrase (empty for no passphrase)ï¼šç›´æ¥å›è½¦ï¼ˆå…å¯†ï¼‰
# Enter same passphrase againï¼šç›´æ¥å›è½¦
```

##### æ­¥éª¤ 4ï¼šæŸ¥çœ‹å¹¶å¤åˆ¶ SSH å…¬é’¥å†…å®¹

bash

è¿è¡Œ

```
# æŸ¥çœ‹ED25519å…¬é’¥å†…å®¹
cat ~/.ssh/id_ed25519.pub
```

ğŸ‘‰ æ“ä½œï¼šé€‰ä¸­å…¨éƒ¨å†…å®¹ï¼ˆä»`ssh-ed25519`åˆ°é‚®ç®±ï¼‰ï¼ŒæŒ‰ `Ctrl+C` å¤åˆ¶ã€‚

> å¤‡é€‰æ–¹å¼ï¼šç›´æ¥æ‰“å¼€æ–‡ä»¶å¤åˆ¶ â†’ è¿›å…¥ `C:\Users\ä½ çš„ç”¨æˆ·å\.ssh` ç›®å½•ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ `id_ed25519.pub`ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹ã€‚

##### æ­¥éª¤ 5ï¼šæ·»åŠ å…¬é’¥åˆ°è¿œç¨‹ Git å¹³å°

å’Œ Linux ç«¯æ­¥éª¤ä¸€è‡´ï¼ˆGitHub/Gitee/GitLab æ·»åŠ å…¬é’¥ï¼‰ã€‚

##### æ­¥éª¤ 6ï¼šéªŒè¯ SSH è¿æ¥æ˜¯å¦æˆåŠŸï¼ˆGit Bash æ‰§è¡Œï¼‰

bash

è¿è¡Œ

```
# éªŒè¯GitHubè¿æ¥
ssh -T git@github.com
# éªŒè¯Giteeè¿æ¥
ssh -T git@gitee.com
```

##### æ­¥éª¤ 7ï¼šWindows ç«¯ SSH å¸¸è§é—®é¢˜æ’æŸ¥

1. Git Bash æ‰§è¡Œ 

   ```
   ssh
   ```

    å‘½ä»¤æç¤ºã€Œcommand not foundã€ï¼š

   - ç¡®è®¤ Git å®‰è£…è·¯å¾„å·²åŠ å…¥ Windows ç¯å¢ƒå˜é‡ â†’ æ£€æŸ¥ `C:\Program Files\Git\usr\bin` æ˜¯å¦åœ¨ PATH ä¸­ã€‚

   

2. éªŒè¯è¿æ¥æ—¶æŠ¥é”™ã€ŒConnection timed outã€ï¼š

   - æ£€æŸ¥ç½‘ç»œä»£ç† / é˜²ç«å¢™ï¼Œå…³é—­åé‡è¯•ï¼›
   - åˆ‡æ¢ç½‘ç»œï¼ˆå¦‚ä»å…¬å¸å†…ç½‘åˆ‡åˆ°çƒ­ç‚¹ï¼‰ã€‚

   

3. ç§é’¥æƒé™è¿‡é«˜ / è¿‡ä½ï¼š

   - Windows ä¸‹å³é”® `id_ed25519` æ–‡ä»¶ â†’ å±æ€§ â†’ å®‰å…¨ â†’ é«˜çº§ â†’ ç¦ç”¨ç»§æ‰¿ â†’ åˆ é™¤æ‰€æœ‰éå½“å‰ç”¨æˆ·çš„æƒé™ â†’ ä»…ä¿ç•™å½“å‰ç”¨æˆ·çš„ã€Œå®Œå…¨æ§åˆ¶ã€ã€‚

   

### äº”ã€é€šç”¨é—®é¢˜æ’æŸ¥

1. Git å®‰è£…å¤±è´¥ï¼š

   - Linux ç«¯ï¼šç¡®ä¿ sudo æƒé™ï¼Œæ‰§è¡Œ `sudo apt update` åé‡è¯•ï¼›
   - Windows ç«¯ï¼šä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå®‰è£…åŒ…ï¼Œå…³é—­æ€æ¯’è½¯ä»¶ã€‚

   

2. ç”¨æˆ·ä¿¡æ¯é…ç½®ä¸ç”Ÿæ•ˆï¼š

   - æ£€æŸ¥å‘½ä»¤æ‹¼å†™ï¼ˆæ— ç©ºæ ¼ / å¼•å·å®Œæ•´ï¼‰ï¼Œé‡å¯ç»ˆç«¯åé‡è¯•ï¼›
   - ç¡®è®¤ä½¿ç”¨ `--global` å‚æ•°ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰ã€‚

   

3. æäº¤æ—¶æŠ¥é”™ã€ŒPlease tell me who you areã€ï¼š

   - æœªé…ç½®ç”¨æˆ·ä¿¡æ¯ï¼Œé‡æ–°æ‰§è¡Œå…¨å±€é…ç½®å‘½ä»¤ã€‚

   

4. SSH éªŒè¯å¤±è´¥ï¼š

   - å…¬é’¥ç²˜è´´ä¸å®Œæ•´ï¼ˆæœ€å¸¸è§ï¼‰ï¼šé‡æ–°å¤åˆ¶å…¬é’¥ï¼Œç¡®ä¿æ— æˆªæ–­ / å¤šä½™ç©ºæ ¼ï¼›
   - è¿œç¨‹ä»“åº“åœ°å€é”™è¯¯ï¼šç¡®è®¤æ˜¯ SSH æ ¼å¼ï¼ˆ`git@xxx.com:ç”¨æˆ·å/ä»“åº“å.git`ï¼‰ï¼›
   - ED25519 ä¸å…¼å®¹ï¼šæå°‘æ•°è€æ—§å¹³å°ä¸æ”¯æŒ ED25519ï¼Œå¯æ”¹ç”¨ RSA 4096 ä½ï¼š`ssh-keygen -t rsa -b 4096 -C "ä½ çš„é‚®ç®±"`ã€‚

   

## 

### SSH å¯†é’¥ç®¡ç†ï¼ˆED25519 ç®—æ³•ï¼Œåˆ†ç³»ç»Ÿï¼‰

| åŠŸèƒ½éœ€æ±‚                   | Linux ç«¯ç»ˆç«¯å‘½ä»¤                                             | Windows ç«¯ç»ˆç«¯å‘½ä»¤ï¼ˆGit Bashï¼‰                               | å¤‡æ³¨                                                    |
| -------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------- |
| æ£€æŸ¥å·²æœ‰ SSH å¯†é’¥          | ls -l ~/.ssh                                                 | ls -l ~/.ssh æˆ– ls -l C:\Users\ ç”¨æˆ·å.ssh                   | æŸ¥çœ‹æ˜¯å¦æœ‰ id_ed25519/id_ed25519.pub æ–‡ä»¶               |
| ç”Ÿæˆ ED25519 SSH å¯†é’¥      | ssh-keygen -t ed25519 -C "ä½ çš„é‚®ç®±"                          | ssh-keygen -t ed25519 -C "ä½ çš„é‚®ç®±"                          | é¦–é€‰ç®—æ³•ï¼Œå®‰å…¨é«˜æ•ˆ                                      |
| ï¼ˆå…¼å®¹ï¼‰ç”Ÿæˆ RSA 4096 å¯†é’¥ | ssh-keygen -t rsa -b 4096 -C "ä½ çš„é‚®ç®±"                      | ssh-keygen -t rsa -b 4096 -C "ä½ çš„é‚®ç®±"                      | é€‚é…è€æ—§ç³»ç»Ÿ / å¹³å°                                     |
| æŸ¥çœ‹ SSH å…¬é’¥å†…å®¹          | cat ~/.ssh/id_ed25519.pub                                    | cat ~/.ssh/id_ed25519.pub                                    | å¤åˆ¶å…¨éƒ¨å†…å®¹åˆ°è¿œç¨‹ Git å¹³å°                             |
| éªŒè¯ GitHub SSH è¿æ¥       | ssh -T git@github.com                                        | ssh -T git@github.com                                        | æˆåŠŸæç¤º "Hi ç”¨æˆ·åï¼You've successfully authenticated" |
| éªŒè¯ Gitee SSH è¿æ¥        | ssh -T git@gitee.com                                         | ssh -T git@gitee.com                                         | åŒä¸Š                                                    |
| é…ç½® SSH æŒä¹…åŒ–è¿æ¥        | vim ~/.ssh/config                                            | vim ~/.ssh/config æˆ– notepad ~/.ssh/config                   | IdentityFile æŒ‡å‘ id_ed25519                            |
| ä¿®å¤ç§é’¥æƒé™é”™è¯¯           | chmod 600 ~/.ssh/id_ed25519                                  | å³é”®æ–‡ä»¶â†’å±æ€§â†’å®‰å…¨â†’ä»…ä¿ç•™å½“å‰ç”¨æˆ·æƒé™                        | Linux éœ€ 600 æƒé™ï¼ŒWindows éœ€ç²¾ç®€æƒé™                   |
| åŠ è½½ SSH ç§é’¥åˆ°ä»£ç†        | eval "$(ssh-agent -s)" && ssh-add ~/.ssh/id_ed25519          | eval "$(ssh-agent -s)" && ssh-add ~/.ssh/id_ed25519          | è§£å†³ "Permission denied (publickey)"                    |
| ä¿®æ”¹è¿œç¨‹åœ°å€ä¸º SSH æ ¼å¼    | git remote set-url origin git@github.com: ç”¨æˆ·å / ä»“åº“å.git | git remote set-url origin git@github.com: ç”¨æˆ·å / ä»“åº“å.git | é€‚é…å…å¯†æ“ä½œ                                            |

## 